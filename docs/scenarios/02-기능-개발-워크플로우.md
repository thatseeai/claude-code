# ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒˆë¡œìš´ ê¸°ëŠ¥ì˜ íƒ„ìƒ - Feature Development ì›Œí¬í”Œë¡œìš°

## í”„ë¡¤ë¡œê·¸: ì‚¬ìš©ìì˜ ìš”ì²­

ì§€ë¯¼ì€ Claude Code ì•ì— ì•‰ì•„ ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë ¸ë‹¤. íšŒì‚¬ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— OAuth ì¸ì¦ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì‹¶ì—ˆë‹¤.

```
> /feature-dev "ì‚¬ìš©ìê°€ Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ OAuth ì¸ì¦ì„ ì¶”ê°€í•´ì¤˜"
```

Enter í‚¤ë¥¼ ëˆ„ë¥´ëŠ” ìˆœê°„, Claude Codeì˜ ê°€ì¥ ì •êµí•œ ì›Œí¬í”Œë¡œìš° ì¤‘ í•˜ë‚˜ê°€ ì‹œì‘ë˜ì—ˆë‹¤. `/feature-dev` ëª…ë ¹ì–´ê°€ í˜¸ì¶œë˜ì—ˆê³ , 7ë‹¨ê³„ì˜ ì—¬ì •ì´ í¼ì³ì§€ë ¤ í•˜ê³  ìˆì—ˆë‹¤.

## ì œ1ë§‰: Phase 1 - ë°œê²¬ì˜ ì‹œì‘ (Discovery)

### ì¥ë©´ 1: Feature-Dev ëª…ë ¹ì–´ì˜ ê¹¨ì–´ë‚¨

**íŒŒì¼**: `plugins/feature-dev/commands/feature-dev.md`

Feature-Dev ëª…ë ¹ì–´ê°€ í™œì„±í™”ë˜ë©´ì„œ, ë¨¼ì € í•  ì¼ ëª©ë¡ì„ ì‘ì„±í•˜ê¸° ì‹œì‘í–ˆë‹¤:

```
[TodoWrite ë„êµ¬ ì‹¤í–‰]

í•  ì¼ ëª©ë¡:
â˜ Phase 1: Discovery - ê¸°ëŠ¥ ì´í•´í•˜ê¸°
â˜ Phase 2: Codebase Exploration - ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰
â˜ Phase 3: Clarifying Questions - ëª…í™•í™” ì§ˆë¬¸
â˜ Phase 4: Architecture Design - ì•„í‚¤í…ì²˜ ì„¤ê³„
â˜ Phase 5: Implementation - êµ¬í˜„
â˜ Phase 6: Quality Review - í’ˆì§ˆ ê²€í† 
â˜ Phase 7: Summary - ìš”ì•½ ë° ë§ˆë¬´ë¦¬
```

ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” ì§€ë¯¼ì´ ì „ì²´ ê³¼ì •ì„ ì¶”ì í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë‚˜ì¹¨ë°˜ì´ ë  ê²ƒì´ì—ˆë‹¤.

### ì¥ë©´ 2: ì‚¬ìš©ìì˜ ì˜ë„ íŒŒì•…

ClaudeëŠ” ì§€ë¯¼ì˜ ìš”ì²­ì„ ë‹¤ì‹œ ì½ê³  ë¶„ì„í–ˆë‹¤:

```
ìš”ì²­: "ì‚¬ìš©ìê°€ Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ OAuth ì¸ì¦ì„ ì¶”ê°€"

ë¶„ì„ ê²°ê³¼:
- ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜: OAuth 2.0
- ì œê³µì: Google
- ëŒ€ìƒ ì‚¬ìš©ì: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš©ì
- ì˜ˆìƒ ë²”ìœ„: ë°±ì—”ë“œ + í”„ë¡ íŠ¸ì—”ë“œ
```

ClaudeëŠ” ì§€ë¯¼ì—ê²Œ í™•ì¸ ì§ˆë¬¸ì„ ë˜ì¡Œë‹¤:

```
ì œê°€ ì´í•´í•œ ë‚´ìš©ì´ ë§ë‚˜ìš”?

ğŸ“‹ ìš”ì²­ì‚¬í•­:
1. Google OAuth 2.0 ì¸ì¦ êµ¬í˜„
2. ê¸°ì¡´ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì— ì¶”ê°€ (ëŒ€ì²´ ì•„ë‹˜)
3. ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
4. ì„¸ì…˜ ê´€ë¦¬ í†µí•©

ì´ ì´í•´ê°€ ì •í™•í•œê°€ìš”? ì•„ë‹ˆë©´ ìˆ˜ì •í•  ë¶€ë¶„ì´ ìˆë‚˜ìš”?
```

ì§€ë¯¼ì´ "ë§ì•„ìš”!"ë¼ê³  ë‹µí•˜ì, ì²« ë²ˆì§¸ ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ë˜ì—ˆë‹¤.

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 1: Discovery - ê¸°ëŠ¥ ì´í•´í•˜ê¸°
â³ Phase 2: Codebase Exploration - ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰
```

## ì œ2ë§‰: Phase 2 - ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰ (Codebase Exploration)

### ì¥ë©´ 3: Code Explorer ì—ì´ì „íŠ¸ë“¤ì˜ ì†Œí™˜

ClaudeëŠ” í˜¼ìì„œ ëª¨ë“  ì½”ë“œë² ì´ìŠ¤ë¥¼ íƒìƒ‰í•˜ëŠ” ëŒ€ì‹ , ì „ë¬¸ê°€ë“¤ì„ ë¶ˆëŸ¬ëª¨ì•˜ë‹¤.

```
[Task ë„êµ¬ ì‹¤í–‰]
ì—ì´ì „íŠ¸: code-explorer (3ê°œ ë³‘ë ¬ ì‹¤í–‰)

Agent 1: "ê¸°ì¡´ ì¸ì¦ ì‹œìŠ¤í…œ ì°¾ê¸°"
Agent 2: "ì‚¬ìš©ì ëª¨ë¸ ë° ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì¡°ì‚¬"
Agent 3: "API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡° ë¶„ì„"
```

**íŒŒì¼**: `plugins/feature-dev/agents/code-explorer.md`

### ì¥ë©´ 4: Agent 1ì˜ íƒí—˜ - ê¸°ì¡´ ì¸ì¦ ì‹œìŠ¤í…œ

Agent 1ì€ í”„ë¡œì íŠ¸ë¥¼ íƒìƒ‰í•˜ê¸° ì‹œì‘í–ˆë‹¤:

```bash
# 1ë‹¨ê³„: ì¸ì¦ ê´€ë ¨ íŒŒì¼ ì°¾ê¸°
[Glob ë„êµ¬ ì‹¤í–‰]
íŒ¨í„´: "**/*auth*.{ts,js,tsx,jsx}"
```

**ê²°ê³¼:**
```
src/auth/
â”œâ”€â”€ auth.service.ts          # ì¸ì¦ ì„œë¹„ìŠ¤
â”œâ”€â”€ jwt.strategy.ts          # JWT ì „ëµ
â”œâ”€â”€ local.strategy.ts        # ë¡œì»¬ ë¡œê·¸ì¸ ì „ëµ
â””â”€â”€ auth.controller.ts       # ì¸ì¦ ì»¨íŠ¸ë¡¤ëŸ¬

src/models/
â””â”€â”€ user.model.ts            # ì‚¬ìš©ì ëª¨ë¸
```

Agent 1ì€ ë°œê²¬í•œ íŒŒì¼ë“¤ì„ ì½ê¸° ì‹œì‘í–ˆë‹¤:

```typescript
// src/auth/auth.service.ts (Read ë„êµ¬ë¡œ ì½ì€ ë‚´ìš©)

@Injectable()
export class AuthService {
  constructor(
    private usersService: UsersService,
    private jwtService: JwtService,
  ) {}

  async validateUser(username: string, password: string): Promise<any> {
    const user = await this.usersService.findOne(username);
    if (user && user.password === password) {
      const { password, ...result } = user;
      return result;
    }
    return null;
  }

  async login(user: any) {
    const payload = { username: user.username, sub: user.userId };
    return {
      access_token: this.jwtService.sign(payload),
    };
  }
}
```

Agent 1ì€ ë©”ëª¨ë¥¼ ì‘ì„±í–ˆë‹¤:

```
ğŸ“ Agent 1ì˜ ë°œê²¬ì‚¬í•­:

í•µì‹¬ íŒŒì¼:
1. src/auth/auth.service.ts:15 - AuthService í´ë˜ìŠ¤
2. src/auth/jwt.strategy.ts:8 - JWT ê²€ì¦ ë¡œì§
3. src/auth/local.strategy.ts:12 - ë¡œì»¬ ì¸ì¦ ì „ëµ
4. src/auth/auth.controller.ts:10 - /auth/login ì—”ë“œí¬ì¸íŠ¸

í˜„ì¬ ì•„í‚¤í…ì²˜:
- NestJS + Passport ê¸°ë°˜
- JWT í† í° ì‚¬ìš©
- ë¡œì»¬ username/passwordë§Œ ì§€ì›
- Strategy íŒ¨í„´ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°

OAuth ì¶”ê°€ í¬ì¸íŠ¸:
- ìƒˆë¡œìš´ GoogleStrategy í•„ìš”
- auth.service.tsì— OAuth ë¡œì§ ì¶”ê°€
- user.model.tsì— googleId í•„ë“œ ì¶”ê°€ í•„ìš”
```

### ì¥ë©´ 5: Agent 2ì™€ Agent 3ì˜ ë™ì‹œ íƒí—˜

Agent 2ì™€ Agent 3ë„ ë™ì‹œì— ì‘ì—…ì„ ìˆ˜í–‰í–ˆë‹¤:

**Agent 2ì˜ ë°œê²¬:**
```
ğŸ“ ì‚¬ìš©ì ëª¨ë¸ êµ¬ì¡°:

// src/models/user.model.ts:5
interface User {
  id: string;
  username: string;
  email: string;
  password: string;  // í•´ì‹œí™”ë¨
  createdAt: Date;
  updatedAt: Date;
}

ë°ì´í„°ë² ì´ìŠ¤: PostgreSQL
ORM: TypeORM
ë§ˆì´ê·¸ë ˆì´ì…˜: src/migrations/

ì¶”ê°€ í•„ìš” í•„ë“œ:
- googleId: string (nullable)
- googleProfile: JSON (nullable)
```

**Agent 3ì˜ ë°œê²¬:**
```
ğŸ“ API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°:

POST /auth/login        - ë¡œì»¬ ë¡œê·¸ì¸
POST /auth/register     - íšŒì›ê°€ì…
GET  /auth/profile      - í”„ë¡œí•„ ì¡°íšŒ

ê¶Œì¥ ì¶”ê°€ ì—”ë“œí¬ì¸íŠ¸:
GET  /auth/google       - Google OAuth ì‹œì‘
GET  /auth/google/callback - Google OAuth ì½œë°±
```

### ì¥ë©´ 6: íƒí—˜ ê²°ê³¼ í†µí•©

3ëª…ì˜ ì—ì´ì „íŠ¸ê°€ ë™ì‹œì— ì‘ì—…ì„ ë§ˆì¹˜ê³  ëŒì•„ì™”ë‹¤. ClaudeëŠ” ì´ë“¤ì˜ ë³´ê³ ì„œë¥¼ ì½ê³  ì¢…í•©í–ˆë‹¤:

```
ğŸ” ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰ ì™„ë£Œ

ë°œê²¬í•œ í•µì‹¬ íŒŒì¼ (10ê°œ):
1. src/auth/auth.service.ts:15
2. src/auth/jwt.strategy.ts:8
3. src/auth/local.strategy.ts:12
4. src/auth/auth.controller.ts:10
5. src/models/user.model.ts:5
6. src/migrations/001_create_users.ts
7. src/config/passport.config.ts
8. src/guards/jwt-auth.guard.ts
9. package.json
10. .env.example

í˜„ì¬ ê¸°ìˆ  ìŠ¤íƒ:
- Framework: NestJS
- Authentication: Passport.js
- Token: JWT
- Database: PostgreSQL + TypeORM
- Testing: Jest

í™•ì¥ ê°€ëŠ¥ì„±:
âœ“ Passportì˜ Strategy íŒ¨í„´ìœ¼ë¡œ ì‰½ê²Œ í™•ì¥ ê°€ëŠ¥
âœ“ ê¸°ì¡´ ì¸ì¦ íë¦„ê³¼ ë³‘í–‰ ê°€ëŠ¥
âœ“ ì‚¬ìš©ì ëª¨ë¸ í™•ì¥ í•„ìš”
```

ì§€ë¯¼ì€ ì´ ë¶„ì„ì„ ë³´ê³  ê³ ê°œë¥¼ ë„ë•ì˜€ë‹¤. Claudeê°€ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì •í™•íˆ ì´í•´í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 1: Discovery
âœ“ Phase 2: Codebase Exploration
â³ Phase 3: Clarifying Questions
```

## ì œ3ë§‰: Phase 3 - ëª…í™•í™” ì§ˆë¬¸ (Clarifying Questions)

### ì¥ë©´ 7: ë¹ ì§„ ì¡°ê° ì°¾ê¸°

ClaudeëŠ” êµ¬í˜„ì— í•„ìš”í•œ ì„¸ë¶€ì‚¬í•­ì„ íŒŒì•…í•˜ê¸° ìœ„í•´ ì¡°ì§ì ìœ¼ë¡œ ì§ˆë¬¸ì„ ì¤€ë¹„í–ˆë‹¤:

```
ëª…í™•íˆ í•´ì•¼ í•  ì‚¬í•­ë“¤:

ğŸ” ë³´ì•ˆ ê´€ë ¨:
1. Google OAuth í´ë¼ì´ì–¸íŠ¸ IDì™€ Secretì€ ì–´ë””ì„œ ê´€ë¦¬í•˜ë‚˜ìš”?
   â†’ .env íŒŒì¼? Secret Manager?

2. OAuth í† í°ì„ ì €ì¥í•´ì•¼ í•˜ë‚˜ìš”?
   â†’ Access Token, Refresh Token ì €ì¥ ì—¬ë¶€

ğŸ‘¤ ì‚¬ìš©ì ê²½í—˜:
3. ê¸°ì¡´ ê³„ì •ê³¼ Google ê³„ì • ì—°ë™ì´ í•„ìš”í•œê°€ìš”?
   â†’ ì´ë©”ì¼ì´ ê°™ìœ¼ë©´ ìë™ ì—°ë™?

4. Google ë¡œê·¸ì¸ ë²„íŠ¼ì„ ì–´ë””ì— í‘œì‹œí•˜ë‚˜ìš”?
   â†’ ê¸°ì¡´ ë¡œê·¸ì¸ í˜ì´ì§€? ìƒˆë¡œìš´ í˜ì´ì§€?

ğŸ—ï¸ ì•„í‚¤í…ì²˜:
5. í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ëŠ” ë¬´ì—‡ì¸ê°€ìš”?
   â†’ React? Vue? Angular?

6. ì„¸ì…˜ ê´€ë¦¬ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?
   â†’ Stateless JWTë§Œ? ì„¸ì…˜ ì €ì¥ì†Œ ì‚¬ìš©?

ğŸ“Š ë°ì´í„°:
7. Googleì—ì„œ ì–´ë–¤ í”„ë¡œí•„ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ê¹Œìš”?
   â†’ ì´ë©”ì¼, ì´ë¦„, í”„ë¡œí•„ ì‚¬ì§„?

8. ê¸°ì¡´ ì‚¬ìš©ì ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í•œê°€ìš”?
```

ì§€ë¯¼ì€ í•˜ë‚˜ì”© ë‹µë³€ì„ ì œê³µí–ˆë‹¤:

```
ë‹µë³€:
1. .env íŒŒì¼ì— ì €ì¥ (ë‚˜ì¤‘ì— Secrets Managerë¡œ ì´ì „ ì˜ˆì •)
2. Access Tokenë§Œ ì €ì¥, Refresh Tokenì€ ë¶ˆí•„ìš”
3. ì´ë©”ì¼ ê¸°ë°˜ ìë™ ì—°ë™
4. ê¸°ì¡´ ë¡œê·¸ì¸ í˜ì´ì§€ì— ë²„íŠ¼ ì¶”ê°€
5. React (TypeScript)
6. JWTë§Œ ì‚¬ìš©
7. ì´ë©”ì¼, ì´ë¦„, í”„ë¡œí•„ ì‚¬ì§„
8. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¶ˆí•„ìš” (ì‹ ê·œ í•„ë“œëŠ” nullable)
```

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 3: Clarifying Questions
â³ Phase 4: Architecture Design
```

## ì œ4ë§‰: Phase 4 - ì•„í‚¤í…ì²˜ ì„¤ê³„ (Architecture Design)

### ì¥ë©´ 8: Code Architect ì—ì´ì „íŠ¸ë“¤ì˜ ì†Œí™˜

ì´ì œ ê°€ì¥ ì¤‘ìš”í•œ ë‹¨ê³„ì˜€ë‹¤. "ì–´ë–»ê²Œ" êµ¬í˜„í•  ê²ƒì¸ê°€?

ClaudeëŠ” ë‹¤ì‹œ ì „ë¬¸ê°€ë“¤ì„ ë¶ˆëŸ¬ëª¨ì•˜ë‹¤. ì´ë²ˆì—ëŠ” **Code Architect** ì—ì´ì „íŠ¸ë“¤ì´ì—ˆë‹¤.

```
[Task ë„êµ¬ ì‹¤í–‰]
ì—ì´ì „íŠ¸: code-architect (3ê°œ ë³‘ë ¬ ì‹¤í–‰)

Architect 1: "Minimal Changes ì ‘ê·¼ë²•"
Architect 2: "Clean Architecture ì ‘ê·¼ë²•"
Architect 3: "Pragmatic Balance ì ‘ê·¼ë²•"
```

**íŒŒì¼**: `plugins/feature-dev/agents/code-architect.md`

### ì¥ë©´ 9: ì„¸ ê°€ì§€ ì ‘ê·¼ë²•

**Architect 1 - Minimal Changes (ìµœì†Œ ë³€ê²½):**
```markdown
## ì ‘ê·¼ë²• 1: ìµœì†Œ ë³€ê²½

ëª©í‘œ: ê¸°ì¡´ ì½”ë“œë¥¼ ìµœëŒ€í•œ ê±´ë“œë¦¬ì§€ ì•Šê³  OAuth ì¶”ê°€

ë³€ê²½ íŒŒì¼:
1. src/auth/google.strategy.ts (ì‹ ê·œ)
   - Passport Google Strategy êµ¬í˜„

2. src/auth/auth.service.ts
   - `validateGoogleUser()` ë©”ì„œë“œ ì¶”ê°€

3. src/auth/auth.controller.ts
   - `@Get('/google')` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
   - `@Get('/google/callback')` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

4. src/models/user.model.ts
   - `googleId?: string` í•„ë“œ ì¶”ê°€

5. package.json
   - `passport-google-oauth20` ì¶”ê°€

ì¥ì :
âœ“ ë¹ ë¥¸ êµ¬í˜„ (2-3ì‹œê°„)
âœ“ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ìµœì†Œí™”
âœ“ í…ŒìŠ¤íŠ¸ ë²”ìœ„ ì œí•œì 

ë‹¨ì :
âœ— í–¥í›„ ë‹¤ë¥¸ OAuth ì œê³µì ì¶”ê°€ ì‹œ ì¤‘ë³µ ì½”ë“œ ë°œìƒ
âœ— ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  ì—¬ì§€ ì ìŒ
```

**Architect 2 - Clean Architecture (ê¹¨ë—í•œ ì•„í‚¤í…ì²˜):**
```markdown
## ì ‘ê·¼ë²• 2: Clean Architecture

ëª©í‘œ: í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°

ìƒˆë¡œìš´ êµ¬ì¡°:
src/auth/
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ base.strategy.ts           # ì¶”ìƒ ì „ëµ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ local.strategy.ts          # ê¸°ì¡´ ë¡œì»¬ ì „ëµ (ë¦¬íŒ©í† ë§)
â”‚   â””â”€â”€ google.strategy.ts         # Google ì „ëµ (ì‹ ê·œ)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth.service.ts            # í•µì‹¬ ì¸ì¦ ë¡œì§
â”‚   â”œâ”€â”€ oauth.service.ts           # OAuth ì „ìš© ì„œë¹„ìŠ¤ (ì‹ ê·œ)
â”‚   â””â”€â”€ user-account.service.ts    # ê³„ì • ì—°ë™ ë¡œì§ (ì‹ ê·œ)
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ oauth-user.dto.ts          # OAuth ì‚¬ìš©ì DTO (ì‹ ê·œ)
â”‚   â””â”€â”€ login-response.dto.ts      # ì‘ë‹µ í‘œì¤€í™” (ì‹ ê·œ)
â””â”€â”€ interfaces/
    â””â”€â”€ oauth-provider.interface.ts # OAuth ì œê³µì ì¸í„°í˜ì´ìŠ¤ (ì‹ ê·œ)

ì¥ì :
âœ“ ë‹¤ë¥¸ OAuth ì œê³µì ì¶”ê°€ ìš©ì´ (Facebook, GitHub ë“±)
âœ“ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± ë†’ìŒ
âœ“ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ ëª…í™•

ë‹¨ì :
âœ— êµ¬í˜„ ì‹œê°„ ì˜¤ë˜ ê±¸ë¦¼ (1-2ì¼)
âœ— ê¸°ì¡´ ì½”ë“œ ëŒ€í­ ë¦¬íŒ©í† ë§ í•„ìš”
âœ— í•™ìŠµ ê³¡ì„  ì¡´ì¬
```

**Architect 3 - Pragmatic Balance (ì‹¤ìš©ì  ê· í˜•):**
```markdown
## ì ‘ê·¼ë²• 3: Pragmatic Balance (ê¶Œì¥)

ëª©í‘œ: ë¹ ë¥¸ êµ¬í˜„ + ì ì ˆí•œ í™•ì¥ì„±

ë³€ê²½/ì¶”ê°€ íŒŒì¼:
1. src/auth/strategies/google.strategy.ts (ì‹ ê·œ)
   - Google OAuth ì „ëµ

2. src/auth/oauth.service.ts (ì‹ ê·œ)
   - OAuth ê³µí†µ ë¡œì§
   - í–¥í›„ ë‹¤ë¥¸ ì œê³µì ì¶”ê°€ ì‹œ ì¬ì‚¬ìš©

3. src/auth/auth.service.ts (ìˆ˜ì •)
   - OAuth ë¡œê·¸ì¸ í†µí•©

4. src/auth/auth.controller.ts (ìˆ˜ì •)
   - OAuth ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

5. src/models/user.model.ts (ìˆ˜ì •)
   - OAuth í•„ë“œ ì¶”ê°€:
     * googleId?: string
     * oauthProvider?: 'google' | 'facebook' | 'github'
     * profilePicture?: string

6. src/migrations/002_add_oauth_fields.ts (ì‹ ê·œ)
   - ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

7. src/config/oauth.config.ts (ì‹ ê·œ)
   - OAuth ì„¤ì • ì¤‘ì•™ ê´€ë¦¬

8. client/src/components/LoginButton.tsx (ìˆ˜ì •)
   - Google ë¡œê·¸ì¸ ë²„íŠ¼ ì¶”ê°€

êµ¬í˜„ ìˆœì„œ:
1ë‹¨ê³„: OAuth ì„¤ì • ë° Strategy êµ¬í˜„ (1ì‹œê°„)
2ë‹¨ê³„: ë°±ì—”ë“œ ë¡œì§ êµ¬í˜„ (2ì‹œê°„)
3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ (30ë¶„)
4ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ë²„íŠ¼ ì¶”ê°€ (1ì‹œê°„)
5ë‹¨ê³„: í†µí•© í…ŒìŠ¤íŠ¸ (1ì‹œê°„)

ì˜ˆìƒ ì†Œìš” ì‹œê°„: 5-6ì‹œê°„

ì¥ì :
âœ“ ì ì ˆí•œ êµ¬í˜„ ì†ë„
âœ“ ê¸°ì¡´ íŒ¨í„´ ìœ ì§€
âœ“ í™•ì¥ì„± í™•ë³´ (ë‹¤ë¥¸ OAuth ì œê³µì ì¶”ê°€ ê°€ëŠ¥)
âœ“ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
âœ“ ì½”ë“œ ì¤‘ë³µ ìµœì†Œí™”

ë‹¨ì :
âœ— Approach 1ë³´ë‹¤ëŠ” ì‹œê°„ ì†Œìš”
```

### ì¥ë©´ 10: ì¶”ì²œ ë° ì‚¬ìš©ì ì„ íƒ

ClaudeëŠ” ì„¸ ê°€ì§€ ì˜µì…˜ì„ ë¹„êµ í‘œë¡œ ì •ë¦¬í–ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê¸°ì¤€           â”‚ Minimal      â”‚ Clean Arch      â”‚ Pragmatic (ê¶Œì¥) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ êµ¬í˜„ ì‹œê°„      â”‚ 2-3ì‹œê°„      â”‚ 1-2ì¼           â”‚ 5-6ì‹œê°„          â”‚
â”‚ í™•ì¥ì„±         â”‚ â­â­         â”‚ â­â­â­â­â­      â”‚ â­â­â­â­         â”‚
â”‚ ì½”ë“œ í’ˆì§ˆ      â”‚ â­â­â­       â”‚ â­â­â­â­â­      â”‚ â­â­â­â­         â”‚
â”‚ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ â”‚ ìµœì†Œ         â”‚ ëŒ€ê·œëª¨          â”‚ ì¤‘ê°„             â”‚
â”‚ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±  â”‚ â­â­â­       â”‚ â­â­â­â­â­      â”‚ â­â­â­â­         â”‚
â”‚ í•™ìŠµ ê³¡ì„       â”‚ ë‚®ìŒ         â”‚ ë†’ìŒ            â”‚ ì¤‘ê°„             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì¶”ì²œ: Pragmatic Balance (ì ‘ê·¼ë²• 3)

ì´ìœ :
- í˜„ì¬ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ë©´ì„œë„ í™•ì¥ ê°€ëŠ¥
- í•©ë¦¬ì ì¸ êµ¬í˜„ ì‹œê°„
- í–¥í›„ Facebook, GitHub OAuth ì¶”ê°€ ì‹œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ì¡°
```

ì§€ë¯¼ì€ ì ì‹œ ê³ ë¯¼í•˜ë‹¤ê°€ ë‹µí–ˆë‹¤:

```
> ì ‘ê·¼ë²• 3ìœ¼ë¡œ ì§„í–‰í•´ì£¼ì„¸ìš”. í™•ì¥ì„±ë„ ì±™ê¸°ë©´ì„œ ë¹¨ë¦¬ êµ¬í˜„í•˜ê³  ì‹¶ì–´ìš”.
```

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 4: Architecture Design
â³ Phase 5: Implementation
```

## ì œ5ë§‰: Phase 5 - êµ¬í˜„ (Implementation)

### ì¥ë©´ 11: êµ¬í˜„ì˜ ì‹œì‘

ClaudeëŠ” êµ¬í˜„ì„ ì‹œì‘í•˜ê¸° ì „ì— ëª…í™•íˆ í–ˆë‹¤:

```
êµ¬í˜„ì„ ì‹œì‘í•©ë‹ˆë‹¤. ë‹¤ìŒ 8ê°œ íŒŒì¼ì„ ìƒì„±/ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤:

ì‹ ê·œ íŒŒì¼ (5ê°œ):
1. src/auth/strategies/google.strategy.ts
2. src/auth/oauth.service.ts
3. src/config/oauth.config.ts
4. src/migrations/002_add_oauth_fields.ts
5. client/src/components/GoogleLoginButton.tsx

ìˆ˜ì • íŒŒì¼ (3ê°œ):
1. src/auth/auth.service.ts
2. src/auth/auth.controller.ts
3. src/models/user.model.ts

ì§„í–‰í•´ë„ ë ê¹Œìš”?
```

ì§€ë¯¼: "ë„¤, ì‹œì‘í•˜ì„¸ìš”!"

### ì¥ë©´ 12: íŒŒì¼ ì‘ì„± - PreToolUse Hookì˜ ê°œì…

Claudeê°€ ì²« ë²ˆì§¸ íŒŒì¼ì„ ì‘ì„±í•˜ë ¤ëŠ” ìˆœê°„:

```
[Write ë„êµ¬ í˜¸ì¶œ]
file_path: src/config/oauth.config.ts
content: ...
```

ê·¸ëŸ°ë° **Security Hook**ì´ ì‘ë™í–ˆë‹¤!

**íŒŒì¼**: `plugins/security-guidance/hooks/security_reminder_hook.py`

```python
# PreToolUse Hookì´ ì‹¤í–‰ë¨
tool_name = "Write"
file_content = "..."

# ë³´ì•ˆ íŒ¨í„´ ì²´í¬
if check_security_patterns(file_content):
    print_warning()
    exit(2)  # ë„êµ¬ ì‹¤í–‰ ì°¨ë‹¨
```

í•˜ì§€ë§Œ OAuth ì„¤ì • íŒŒì¼ì€ ì•ˆì „í–ˆë‹¤. Hookì€ ì¡°ìš©íˆ í†µê³¼ë¥¼ í—ˆë½í–ˆë‹¤.

```
[Security Check]
âœ“ íŒŒì¼: src/config/oauth.config.ts
âœ“ ê²€ì‚¬ ì™„ë£Œ: ë³´ì•ˆ ì·¨ì•½ì  ì—†ìŒ
âœ“ ë„êµ¬ ì‹¤í–‰ í—ˆìš©
```

ClaudeëŠ” íŒŒì¼ì„ ì‘ì„±í–ˆë‹¤:

```typescript
// src/config/oauth.config.ts

import { registerAs } from '@nestjs/config';

export default registerAs('oauth', () => ({
  google: {
    clientID: process.env.GOOGLE_CLIENT_ID,
    clientSecret: process.env.GOOGLE_CLIENT_SECRET,
    callbackURL: process.env.GOOGLE_CALLBACK_URL || 'http://localhost:3000/auth/google/callback',
    scope: ['email', 'profile'],
  },
}));
```

```
[TodoWrite ì—…ë°ì´íŠ¸]
â³ Phase 5: Implementation
  âœ“ OAuth ì„¤ì • íŒŒì¼ ìƒì„±
  â³ Google Strategy êµ¬í˜„
  â˜ OAuth Service êµ¬í˜„
  â˜ Auth Service ìˆ˜ì •
  â˜ Auth Controller ìˆ˜ì •
  â˜ User Model ìˆ˜ì •
  â˜ Migration ìƒì„±
  â˜ í”„ë¡ íŠ¸ì—”ë“œ ë²„íŠ¼ ì¶”ê°€
```

### ì¥ë©´ 13: í•µì‹¬ ë¡œì§ êµ¬í˜„

ClaudeëŠ” ê³„ì†í•´ì„œ íŒŒì¼ë“¤ì„ ì‘ì„±í•´ë‚˜ê°”ë‹¤:

```typescript
// src/auth/strategies/google.strategy.ts

import { PassportStrategy } from '@nestjs/passport';
import { Strategy, VerifyCallback } from 'passport-google-oauth20';
import { Injectable } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { OAuthService } from '../oauth.service';

@Injectable()
export class GoogleStrategy extends PassportStrategy(Strategy, 'google') {
  constructor(
    private configService: ConfigService,
    private oauthService: OAuthService,
  ) {
    super({
      clientID: configService.get('oauth.google.clientID'),
      clientSecret: configService.get('oauth.google.clientSecret'),
      callbackURL: configService.get('oauth.google.callbackURL'),
      scope: configService.get('oauth.google.scope'),
    });
  }

  async validate(
    accessToken: string,
    refreshToken: string,
    profile: any,
    done: VerifyCallback,
  ): Promise<any> {
    const { id, emails, displayName, photos } = profile;

    const user = await this.oauthService.validateOAuthUser({
      oauthProvider: 'google',
      oauthId: id,
      email: emails[0].value,
      name: displayName,
      profilePicture: photos[0]?.value,
    });

    done(null, user);
  }
}
```

í•˜ë‚˜í•˜ë‚˜ íŒŒì¼ì´ ì™„ì„±ë  ë•Œë§ˆë‹¤, ClaudeëŠ” TodoWriteë¥¼ ì—…ë°ì´íŠ¸í–ˆë‹¤.

```
[TodoWrite ì—…ë°ì´íŠ¸]
â³ Phase 5: Implementation
  âœ“ OAuth ì„¤ì • íŒŒì¼ ìƒì„±
  âœ“ Google Strategy êµ¬í˜„
  âœ“ OAuth Service êµ¬í˜„
  âœ“ Auth Service ìˆ˜ì •
  âœ“ Auth Controller ìˆ˜ì •
  â³ User Model ìˆ˜ì •
  â˜ Migration ìƒì„±
  â˜ í”„ë¡ íŠ¸ì—”ë“œ ë²„íŠ¼ ì¶”ê°€
```

### ì¥ë©´ 14: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```typescript
// src/migrations/002_add_oauth_fields.ts

import { MigrationInterface, QueryRunner, TableColumn } from 'typeorm';

export class AddOAuthFields1699999999999 implements MigrationInterface {
  public async up(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.addColumns('users', [
      new TableColumn({
        name: 'google_id',
        type: 'varchar',
        length: '255',
        isNullable: true,
        isUnique: true,
      }),
      new TableColumn({
        name: 'oauth_provider',
        type: 'varchar',
        length: '50',
        isNullable: true,
      }),
      new TableColumn({
        name: 'profile_picture',
        type: 'text',
        isNullable: true,
      }),
    ]);
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.dropColumns('users', [
      'google_id',
      'oauth_provider',
      'profile_picture',
    ]);
  }
}
```

### ì¥ë©´ 15: í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸

ë§ˆì§€ë§‰ìœ¼ë¡œ React ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í–ˆë‹¤:

```typescript
// client/src/components/LoginButton.tsx (ìˆ˜ì •ë¨)

import React from 'react';

export const LoginButtons: React.FC = () => {
  const handleGoogleLogin = () => {
    window.location.href = 'http://localhost:3000/auth/google';
  };

  return (
    <div className="login-container">
      {/* ê¸°ì¡´ ë¡œê·¸ì¸ í¼ */}
      <form onSubmit={handleLocalLogin}>
        {/* ... */}
      </form>

      <div className="divider">ë˜ëŠ”</div>

      {/* ìƒˆë¡œìš´ Google ë¡œê·¸ì¸ ë²„íŠ¼ */}
      <button
        onClick={handleGoogleLogin}
        className="google-login-btn"
      >
        <img src="/google-icon.svg" alt="Google" />
        Googleë¡œ ë¡œê·¸ì¸
      </button>
    </div>
  );
};
```

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 5: Implementation (ëª¨ë“  íŒŒì¼ ì‘ì„± ì™„ë£Œ)
â³ Phase 6: Quality Review
```

## ì œ6ë§‰: Phase 6 - í’ˆì§ˆ ê²€í†  (Quality Review)

### ì¥ë©´ 16: Code Reviewer ì—ì´ì „íŠ¸ë“¤ì˜ ì†Œí™˜

êµ¬í˜„ì´ ëë‚¬ì§€ë§Œ, ì•„ì§ ëì´ ì•„ë‹ˆì—ˆë‹¤. ì´ì œ 3ëª…ì˜ **Code Reviewer** ì—ì´ì „íŠ¸ë“¤ì´ ë“±ì¥í•  ì°¨ë¡€ì˜€ë‹¤.

```
[Task ë„êµ¬ ì‹¤í–‰]
ì—ì´ì „íŠ¸: code-reviewer (3ê°œ ë³‘ë ¬ ì‹¤í–‰)

Reviewer 1: "Simplicity & DRY ê´€ì "
Reviewer 2: "Bugs & Functional Correctness ê´€ì "
Reviewer 3: "Conventions & Abstractions ê´€ì "
```

**íŒŒì¼**: `plugins/feature-dev/agents/code-reviewer.md`

### ì¥ë©´ 17: ì„¸ ê°€ì§€ ê´€ì ì˜ ê²€í† 

**Reviewer 1 - Simplicity & DRY:**
```markdown
ê²€í†  ì™„ë£Œ: Simplicity & DRY ê´€ì 

ë°œê²¬ëœ ì´ìŠˆ:

1. [Confidence: 85] ì¤‘ë³µ ì½”ë“œ ê°€ëŠ¥ì„±
   ìœ„ì¹˜: src/auth/auth.service.ts:45
   ë¬¸ì œ: `createUserSession()` ë¡œì§ì´ localê³¼ OAuthì—ì„œ ì¤‘ë³µ
   ì œì•ˆ: ê³µí†µ ë©”ì„œë“œë¡œ ì¶”ì¶œ

   ```typescript
   // Before
   // local ë¡œê·¸ì¸ê³¼ OAuth ë¡œê·¸ì¸ì—ì„œ ê°ê° ì¤‘ë³µëœ JWT ìƒì„± ë¡œì§

   // After
   private createUserSession(user: User) {
     const payload = { username: user.username, sub: user.id };
     return {
       access_token: this.jwtService.sign(payload),
       user: this.sanitizeUser(user),
     };
   }
   ```

2. [Confidence: 75] ë³µì¡ë„ ê°œì„ 
   ìœ„ì¹˜: src/auth/oauth.service.ts:28
   ë¬¸ì œ: `validateOAuthUser()` ë©”ì„œë“œê°€ ë„ˆë¬´ ë§ì€ ì—­í•  ìˆ˜í–‰
   ì œì•ˆ: ì‚¬ìš©ì ì°¾ê¸°, ìƒì„±, ì—…ë°ì´íŠ¸ë¥¼ ë³„ë„ ë©”ì„œë“œë¡œ ë¶„ë¦¬
   â†’ ì‹ ë¢°ë„ 80 ë¯¸ë§Œì´ë¯€ë¡œ ë³´ê³ í•˜ì§€ ì•ŠìŒ
```

**Reviewer 2 - Bugs & Correctness:**
```markdown
ê²€í†  ì™„ë£Œ: Bugs & Functional Correctness ê´€ì 

ë°œê²¬ëœ ì´ìŠˆ:

1. [Confidence: 95] ì—ëŸ¬ ì²˜ë¦¬ ëˆ„ë½
   ìœ„ì¹˜: src/auth/strategies/google.strategy.ts:18
   ë¬¸ì œ: Google API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ì—†ìŒ
   ì œì•ˆ: try-catch ë¸”ë¡ìœ¼ë¡œ ê°ì‹¸ê³  ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜

   ```typescript
   async validate(...): Promise<any> {
     try {
       const user = await this.oauthService.validateOAuthUser({...});
       done(null, user);
     } catch (error) {
       done(error, null);
     }
   }
   ```

2. [Confidence: 90] ì´ë©”ì¼ ê²€ì¦ ëˆ„ë½
   ìœ„ì¹˜: src/auth/oauth.service.ts:35
   ë¬¸ì œ: Googleì—ì„œ ë°›ì€ ì´ë©”ì¼ì´ verifiedì¸ì§€ í™•ì¸ ì•ˆ í•¨
   ì œì•ˆ: profile.emails[0].verified ì²´í¬ ì¶”ê°€

   ```typescript
   const emailData = emails[0];
   if (!emailData.verified) {
     throw new UnauthorizedException('Email not verified');
   }
   ```

3. [Confidence: 82] Race Condition ê°€ëŠ¥ì„±
   ìœ„ì¹˜: src/auth/oauth.service.ts:40-50
   ë¬¸ì œ: ë™ì‹œì— ê°™ì€ Google IDë¡œ ë¡œê·¸ì¸ ì‹œ ì¤‘ë³µ ìƒì„± ê°€ëŠ¥
   ì œì•ˆ: Database unique constraintì™€ í•¨ê»˜ upsert ì‚¬ìš©
```

**Reviewer 3 - Conventions & Abstractions:**
```markdown
ê²€í†  ì™„ë£Œ: Conventions & Abstractions ê´€ì 

ë°œê²¬ëœ ì´ìŠˆ:

1. [Confidence: 88] ë„¤ì´ë° ì¼ê´€ì„±
   ìœ„ì¹˜: src/models/user.model.ts:12
   ë¬¸ì œ: í•„ë“œëª…ì´ snake_caseì™€ camelCase í˜¼ìš©
   ì œì•ˆ: TypeORM ì„¤ì •ì— ë”°ë¼ í†µì¼ (ê¶Œì¥: camelCase)

   ```typescript
   // Before: google_id (database)
   // After: googleId (entity) + naming strategy ì„¤ì •
   ```

2. [Confidence: 91] DTO ëˆ„ë½
   ìœ„ì¹˜: src/auth/auth.controller.ts:45
   ë¬¸ì œ: Google callbackì—ì„œ response DTO ì‚¬ìš© ì•ˆ í•¨
   ì œì•ˆ: LoginResponseDto ìƒì„±í•˜ì—¬ ì‘ë‹µ íƒ€ì… ëª…ì‹œ

   ```typescript
   @Get('/google/callback')
   @UseGuards(AuthGuard('google'))
   async googleCallback(@Req() req): Promise<LoginResponseDto> {
     return this.authService.login(req.user);
   }
   ```
```

### ì¥ë©´ 18: ê²€í†  ê²°ê³¼ í†µí•©

3ëª…ì˜ ë¦¬ë·°ì–´ê°€ ëª¨ë‘ ë³´ê³ ë¥¼ ë§ˆì³¤ë‹¤. ClaudeëŠ” ì‹ ë¢°ë„ 80 ì´ìƒì˜ ì´ìŠˆë§Œ í•„í„°ë§í–ˆë‹¤:

```
ğŸ” ì½”ë“œ ê²€í†  ì™„ë£Œ

ë°œê²¬ëœ ì´ìŠˆ: 6ê°œ (ì‹ ë¢°ë„ â‰¥80ë§Œ í‘œì‹œ)

ë†’ì€ ìš°ì„ ìˆœìœ„:
1. [95% ì‹ ë¢°] ì—ëŸ¬ ì²˜ë¦¬ ëˆ„ë½ - google.strategy.ts:18
2. [91% ì‹ ë¢°] DTO ëˆ„ë½ - auth.controller.ts:45
3. [90% ì‹ ë¢°] ì´ë©”ì¼ ê²€ì¦ ëˆ„ë½ - oauth.service.ts:35

ì¤‘ê°„ ìš°ì„ ìˆœìœ„:
4. [88% ì‹ ë¢°] ë„¤ì´ë° ì¼ê´€ì„± - user.model.ts:12
5. [85% ì‹ ë¢°] ì¤‘ë³µ ì½”ë“œ - auth.service.ts:45
6. [82% ì‹ ë¢°] Race Condition - oauth.service.ts:40

ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
1. ì§€ê¸ˆ ëª¨ë‘ ìˆ˜ì •
2. ë†’ì€ ìš°ì„ ìˆœìœ„ë§Œ ìˆ˜ì •
3. ë‚˜ì¤‘ì— ìˆ˜ì • (Issue ìƒì„±)
4. ë¬´ì‹œ
```

ì§€ë¯¼: "ë†’ì€ ìš°ì„ ìˆœìœ„ë§Œ ì§€ê¸ˆ ìˆ˜ì •í•´ì£¼ì„¸ìš”."

ClaudeëŠ” ì¦‰ì‹œ 3ê°œì˜ ì´ìŠˆë¥¼ ìˆ˜ì •í–ˆë‹¤. Edit ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ ë¶€ë¶„ë§Œ ë³€ê²½í–ˆë‹¤.

```
[TodoWrite ì—…ë°ì´íŠ¸]
âœ“ Phase 6: Quality Review
  âœ“ ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
  âœ“ ë†’ì€ ìš°ì„ ìˆœìœ„ ì´ìŠˆ ìˆ˜ì • ì™„ë£Œ
â³ Phase 7: Summary
```

## ì œ7ë§‰: Phase 7 - ìš”ì•½ ë° ë§ˆë¬´ë¦¬ (Summary)

### ì¥ë©´ 19: ì—¬ì •ì˜ ë

ëª¨ë“  ë‹¨ê³„ê°€ ì™„ë£Œë˜ì—ˆë‹¤. ClaudeëŠ” ìµœì¢… ìš”ì•½ì„ ì‘ì„±í–ˆë‹¤:

```
âœ… Google OAuth ì¸ì¦ êµ¬í˜„ ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š ì‘ì—… ìš”ì•½:

ì‹ ê·œ íŒŒì¼ (5ê°œ):
âœ“ src/auth/strategies/google.strategy.ts
âœ“ src/auth/oauth.service.ts
âœ“ src/config/oauth.config.ts
âœ“ src/migrations/002_add_oauth_fields.ts
âœ“ client/src/components/GoogleLoginButton.tsx

ìˆ˜ì • íŒŒì¼ (3ê°œ):
âœ“ src/auth/auth.service.ts
âœ“ src/auth/auth.controller.ts
âœ“ src/models/user.model.ts

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ êµ¬í˜„ëœ ê¸°ëŠ¥:

1. Google OAuth 2.0 ì¸ì¦ í”Œë¡œìš°
2. ê¸°ì¡´ ê³„ì •ê³¼ ì´ë©”ì¼ ê¸°ë°˜ ìë™ ì—°ë™
3. ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ ì €ì¥ (ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„)
4. JWT í† í° ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬
5. í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ ë²„íŠ¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ ë‹¤ìŒ ë‹¨ê³„:

1. í™˜ê²½ë³€ìˆ˜ ì„¤ì •:
   .env íŒŒì¼ì— ì¶”ê°€ í•„ìš”:
   ```
   GOOGLE_CLIENT_ID=your_client_id
   GOOGLE_CLIENT_SECRET=your_secret
   GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback
   ```

2. ì˜ì¡´ì„± ì„¤ì¹˜:
   ```bash
   npm install passport-google-oauth20 @types/passport-google-oauth20
   ```

3. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜:
   ```bash
   npm run migration:run
   ```

4. Google Cloud Console ì„¤ì •:
   - OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
   - ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€
   - OAuth ë™ì˜ í™”ë©´ êµ¬ì„±

5. í…ŒìŠ¤íŠ¸:
   ```bash
   npm run test:e2e
   ```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ë‚¨ì€ ì´ìŠˆ (ë‚˜ì¤‘ì— í•´ê²°):

- [88%] ë„¤ì´ë° ì¼ê´€ì„± ê°œì„ 
- [85%] ì¤‘ë³µ ì½”ë“œ ë¦¬íŒ©í† ë§
- [82%] Race Condition ë°©ì§€

GitHub Issueë¡œ ìƒì„±í• ê¹Œìš”?
```

```
[TodoWrite ìµœì¢…]
âœ“ Phase 1: Discovery
âœ“ Phase 2: Codebase Exploration
âœ“ Phase 3: Clarifying Questions
âœ“ Phase 4: Architecture Design
âœ“ Phase 5: Implementation
âœ“ Phase 6: Quality Review
âœ“ Phase 7: Summary

ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ! ğŸ‰
```

## ì—í•„ë¡œê·¸: ì™„ì„±ì˜ ìˆœê°„

ì§€ë¯¼ì€ í™”ë©´ì„ ë°”ë¼ë³´ë©° ê°íƒ„í–ˆë‹¤. ë‹¨ìˆœíˆ "OAuth ì¶”ê°€í•´ì¤˜"ë¼ëŠ” í•œ ì¤„ì˜ ìš”ì²­ì´ ì´ë ‡ê²Œ ì²´ê³„ì ì¸ ê³¼ì •ì„ ê±°ì³ ì™„ì„±ë˜ì—ˆë‹¤.

7ë‹¨ê³„ì˜ ì—¬ì •:
1. ë°œê²¬: ìš”êµ¬ì‚¬í•­ ì´í•´
2. íƒìƒ‰: 3ëª…ì˜ Explorerê°€ ì½”ë“œë² ì´ìŠ¤ ë¶„ì„
3. ì§ˆë¬¸: ëª¨í˜¸í•œ ë¶€ë¶„ ëª…í™•í™”
4. ì„¤ê³„: 3ëª…ì˜ Architectê°€ ë‹¤ì–‘í•œ ì ‘ê·¼ë²• ì œì‹œ
5. êµ¬í˜„: 8ê°œ íŒŒì¼ ì‘ì„±/ìˆ˜ì •
6. ê²€í† : 3ëª…ì˜ Reviewerê°€ í’ˆì§ˆ ê²€ì¦
7. ìš”ì•½: ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´

ì´ 9ëª…ì˜ ì—ì´ì „íŠ¸ê°€ ë™ì›ë˜ì—ˆê³ , ê°ìì˜ ì „ë¬¸ì„±ì„ ë°œíœ˜í–ˆë‹¤. ë³‘ë ¬ ì‹¤í–‰ìœ¼ë¡œ ì‹œê°„ì„ ì ˆì•½í–ˆê³ , ë‹¤ì–‘í•œ ê´€ì ìœ¼ë¡œ í’ˆì§ˆì„ ë³´ì¥í–ˆë‹¤.

ì§€ë¯¼ì€ `.env` íŒŒì¼ì„ ì—´ì—ˆë‹¤. ì´ì œ Google Client IDë¥¼ ì„¤ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³¼ ì°¨ë¡€ì˜€ë‹¤.

Claude Codeì˜ ê°€ì¥ ê°•ë ¥í•œ ì›Œí¬í”Œë¡œìš°, `/feature-dev`ì˜ ì´ì•¼ê¸°ëŠ” ì´ë ‡ê²Œ ëë‚¬ë‹¤. í•˜ì§€ë§Œ ì§€ë¯¼ì˜ í”„ë¡œì íŠ¸ëŠ” ì´ì œ ë§‰ ì‹œì‘ì´ì—ˆë‹¤.

---

## ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### 7ë‹¨ê³„ ì›Œí¬í”Œë¡œìš° ìš”ì•½

```
Phase 1: Discovery (5ë¶„)
    â””â”€ ìš”êµ¬ì‚¬í•­ ì´í•´ ë° í™•ì¸

Phase 2: Codebase Exploration (10-15ë¶„)
    â”œâ”€ code-explorer Agent Ã— 3 (ë³‘ë ¬)
    â”œâ”€ Glob/Grepìœ¼ë¡œ íŒŒì¼ ê²€ìƒ‰
    â”œâ”€ Readë¡œ íŒŒì¼ ë‚´ìš© ë¶„ì„
    â””â”€ 5-10ê°œ í•µì‹¬ íŒŒì¼ ì‹ë³„

Phase 3: Clarifying Questions (5-10ë¶„)
    â””â”€ ëª¨í˜¸í•œ ì‚¬í•­ ì§ˆë¬¸ ë° ë‹µë³€

Phase 4: Architecture Design (15-20ë¶„)
    â”œâ”€ code-architect Agent Ã— 3 (ë³‘ë ¬)
    â”œâ”€ Minimal / Clean / Pragmatic ì ‘ê·¼ë²•
    â””â”€ ì‚¬ìš©ì ì„ íƒ

Phase 5: Implementation (30-60ë¶„)
    â”œâ”€ Write/Edit ë„êµ¬ë¡œ íŒŒì¼ ìƒì„±/ìˆ˜ì •
    â”œâ”€ PreToolUse Hook ì‹¤í–‰ (ë³´ì•ˆ ì²´í¬)
    â””â”€ TodoWriteë¡œ ì§„í–‰ìƒí™© ì¶”ì 

Phase 6: Quality Review (15-20ë¶„)
    â”œâ”€ code-reviewer Agent Ã— 3 (ë³‘ë ¬)
    â”œâ”€ Simplicity / Bugs / Conventions ê´€ì 
    â”œâ”€ ì‹ ë¢°ë„ â‰¥80ë§Œ ë³´ê³ 
    â””â”€ ìš°ì„ ìˆœìœ„ë³„ ìˆ˜ì •

Phase 7: Summary (5ë¶„)
    â”œâ”€ ì‘ì—… ë‚´ì—­ ìš”ì•½
    â”œâ”€ ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´
    â””â”€ ë‚¨ì€ ì´ìŠˆ ì •ë¦¬

ì´ ì†Œìš” ì‹œê°„: 85-135ë¶„
```

### ì—ì´ì „íŠ¸ ì‹¤í–‰ íŒ¨í„´

```
ë™ì‹œ ì‹¤í–‰ (Parallel):
- Phase 2: code-explorer Ã— 3
- Phase 4: code-architect Ã— 3
- Phase 6: code-reviewer Ã— 3

ìˆœì°¨ ì‹¤í–‰ (Sequential):
- Phase 1 â†’ Phase 2 â†’ ... â†’ Phase 7
- ê° PhaseëŠ” ì´ì „ Phase ì™„ë£Œ í›„ ì‹œì‘
- Checkpointì—ì„œ ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸°
```

### ê´€ë ¨ íŒŒì¼

| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ ê²½ë¡œ |
|---------|----------|
| Feature-Dev ëª…ë ¹ì–´ | `plugins/feature-dev/commands/feature-dev.md` |
| Code Explorer ì—ì´ì „íŠ¸ | `plugins/feature-dev/agents/code-explorer.md` |
| Code Architect ì—ì´ì „íŠ¸ | `plugins/feature-dev/agents/code-architect.md` |
| Code Reviewer ì—ì´ì „íŠ¸ | `plugins/feature-dev/agents/code-reviewer.md` |
| Security Hook | `plugins/security-guidance/hooks/security_reminder_hook.py` |

### í•µì‹¬ ë„êµ¬ ì‚¬ìš©

- **Task**: ì—ì´ì „íŠ¸ ì‹¤í–‰ (ë³‘ë ¬ ê°€ëŠ¥)
- **TodoWrite**: ì§„í–‰ìƒí™© ì¶”ì 
- **Glob**: íŒŒì¼ íŒ¨í„´ ê²€ìƒ‰
- **Grep**: ì½”ë“œ ê²€ìƒ‰
- **Read**: íŒŒì¼ ì½ê¸°
- **Write**: íŒŒì¼ ìƒì„±
- **Edit**: íŒŒì¼ ìˆ˜ì •

ì´ê²ƒì´ Claude Codeì˜ Feature Development ì›Œí¬í”Œë¡œìš°ë‹¤. ë‹¨ìˆœí•œ ì½”ë“œ ìƒì„± ë„êµ¬ê°€ ì•„ë‹ˆë¼, ì²´ê³„ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì•ˆë‚´í•˜ëŠ” AI ì•„í‚¤í…íŠ¸ì¸ ê²ƒì´ë‹¤.
